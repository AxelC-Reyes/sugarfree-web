<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encuentra tu Match - Sugar-Free</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FF4D8D;
            --secondary-color: #9C27B0;
            --accent-color: #FF9800;
            --dark-color: #1A1A2E;
            --light-color: #F8F9FA;
            --success-color: #4CAF50;
            --transition: all 0.3s ease;
            --border-radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1A1A2E 0%, #16213E 100%);
            color: var(--light-color);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            object-fit: contain;
            filter: drop-shadow(0 4px 10px rgba(255, 77, 141, 0.3));
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        /* Sidebar - Preferencias */
        .sidebar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar h2 {
            font-size: 20px;
            margin-bottom: 25px;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preference-group {
            margin-bottom: 25px;
        }

        .preference-group h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .preference-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preference-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
        }

        .preference-btn.active {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-color: transparent;
            color: white;
        }

        .preference-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 77, 141, 0.3);
        }

        .slider-container {
            margin-top: 15px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* Match Container */
        .match-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
            position: relative;
        }

        .match-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .match-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .match-header p {
            color: rgba(255, 255, 255, 0.6);
        }

        /* Card Swipe */
        .card-container {
            position: relative;
            height: 500px;
            margin: 30px;
            perspective: 1000px;
        }

        .match-card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.08);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: transform 0.6s, opacity 0.6s;
            cursor: grab;
            user-select: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .match-card:active {
            cursor: grabbing;
        }

        .match-card.swipe-left {
            transform: translateX(-100%) rotate(-20deg);
            opacity: 0;
        }

        .match-card.swipe-right {
            transform: translateX(100%) rotate(20deg);
            opacity: 0;
        }

        .match-card.swipe-up {
            transform: translateY(-100%) scale(0.8);
            opacity: 0;
        }

        .card-image {
            width: 100%;
            height: 60%;
            object-fit: cover;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-content {
            padding: 25px;
            height: 40%;
            display: flex;
            flex-direction: column;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .card-name {
            font-size: 24px;
            font-weight: 600;
        }

        .card-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-daddy {
            background: linear-gradient(135deg, #FF4D8D, #9C27B0);
        }

        .badge-mommy {
            background: linear-gradient(135deg, #9C27B0, #673AB7);
        }

        .badge-boy {
            background: linear-gradient(135deg, #2196F3, #03A9F4);
        }

        .badge-girl {
            background: linear-gradient(135deg, #FF4D8D, #FF4081);
        }

        .card-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: auto;
        }

        .tag {
            padding: 4px 10px;
            background: rgba(255, 77, 141, 0.1);
            border-radius: 20px;
            font-size: 12px;
            color: var(--primary-color);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .action-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .btn-dislike {
            background: rgba(244, 67, 54, 0.1);
            color: #f44336;
            border: 2px solid rgba(244, 67, 54, 0.3);
        }

        .btn-dislike:hover {
            background: rgba(244, 67, 54, 0.2);
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(244, 67, 54, 0.2);
        }

        .btn-super-like {
            background: rgba(33, 150, 243, 0.1);
            color: #2196F3;
            border: 2px solid rgba(33, 150, 243, 0.3);
        }

        .btn-super-like:hover {
            background: rgba(33, 150, 243, 0.2);
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(33, 150, 243, 0.2);
        }

        .btn-like {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            border: 2px solid rgba(76, 175, 80, 0.3);
        }

        .btn-like:hover {
            background: rgba(76, 175, 80, 0.2);
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.2);
        }

        /* Match Overlay */
        .match-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .match-celebration {
            background: rgba(26, 26, 46, 0.95);
            border-radius: var(--border-radius);
            padding: 50px;
            text-align: center;
            border: 1px solid var(--primary-color);
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: popIn 0.5s ease;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .match-celebration i {
            font-size: 80px;
            color: var(--primary-color);
            margin-bottom: 20px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .match-celebration h2 {
            font-size: 36px;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* No More Cards */
        .no-more-cards {
            text-align: center;
            padding: 80px 40px;
            color: rgba(255, 255, 255, 0.6);
        }

        .no-more-cards i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .refresh-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .refresh-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(156, 39, 176, 0.3);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
            
            .card-container {
                height: 450px;
                margin: 20px;
            }
        }

        @media (max-width: 768px) {
            .stats-bar {
                flex-wrap: wrap;
                gap: 20px;
            }
            
            .action-buttons {
                gap: 15px;
                padding: 20px;
            }
            
            .action-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .card-container {
                height: 400px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .card-details {
                grid-template-columns: 1fr;
            }
            
            .match-celebration {
                padding: 30px 20px;
            }
            
            .match-celebration h2 {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <img src="caramelo.png" alt="Logo" class="logo-img">
                <div class="logo-text">Sugar-Free</div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="likesCount">0</div>
                <div class="stat-label">Likes Dados</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="matchesCount">0</div>
                <div class="stat-label">Matches</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="viewsCount">0</div>
                <div class="stat-label">Perfiles Vistos</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="compatibility">85%</div>
                <div class="stat-label">Compatibilidad Promedio</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar de Preferencias -->
            <div class="sidebar">
                <h2><i class="fas fa-sliders-h"></i> Tus Preferencias</h2>
                
                <div class="preference-group">
                    <h3><i class="fas fa-venus-mars"></i> Busco</h3>
                    <div class="preference-options">
                        <button class="preference-btn active" data-type="all">Todos</button>
                        <button class="preference-btn" data-type="daddy">Sugar Daddies</button>
                        <button class="preference-btn" data-type="mommy">Sugar Mommies</button>
                        <button class="preference-btn" data-type="boy">Sugar Boys</button>
                        <button class="preference-btn" data-type="girl">Sugar Girls</button>
                    </div>
                </div>

                <div class="preference-group">
                    <h3><i class="fas fa-calendar-alt"></i> Rango de Edad</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span id="ageMin">18</span>
                            <span id="ageMax">65</span>
                        </div>
                        <input type="range" min="18" max="65" value="18" class="slider" id="ageSliderMin">
                        <input type="range" min="18" max="65" value="65" class="slider" id="ageSliderMax">
                    </div>
                </div>

                <div class="preference-group">
                    <h3><i class="fas fa-ruler"></i> Altura</h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span id="heightMin">140 cm</span>
                            <span id="heightMax">200 cm</span>
                        </div>
                        <input type="range" min="140" max="200" value="150" class="slider" id="heightSliderMin">
                        <input type="range" min="140" max="200" value="200" class="slider" id="heightSliderMax">
                    </div>
                </div>

                <div class="preference-group">
                    <h3><i class="fas fa-map-marker-alt"></i> Ubicación</h3>
                    <div class="preference-options">
                        <button class="preference-btn active" data-location="all">Cualquiera</button>
                        <button class="preference-btn" data-location="near">Cerca de mí</button>
                        <button class="preference-btn" data-location="same">Misma ciudad</button>
                    </div>
                </div>

                <div class="preference-group">
                    <h3><i class="fas fa-heart"></i> Estilo de Vida</h3>
                    <div class="preference-options">
                        <button class="preference-btn active" data-lifestyle="all">Todos</button>
                        <button class="preference-btn" data-lifestyle="luxury">Lujoso</button>
                        <button class="preference-btn" data-lifestyle="travel">Viajero</button>
                        <button class="preference-btn" data-lifestyle="discreet">Discreto</button>
                        <button class="preference-btn" data-lifestyle="social">Social</button>
                    </div>
                </div>

                <button id="applyPreferences" style="
                    width: 100%;
                    padding: 15px;
                    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
                    color: white;
                    border: none;
                    border-radius: var(--border-radius);
                    font-family: 'Poppins', sans-serif;
                    font-weight: 600;
                    cursor: pointer;
                    transition: var(--transition);
                    margin-top: 20px;
                ">
                    <i class="fas fa-sync-alt"></i> Aplicar Preferencias
                </button>
            </div>

            <!-- Área de Matches -->
            <div class="match-container">
                <div class="match-header">
                    <h2>Encuentra tu Match Perfecto</h2>
                    <p>Desliza a la derecha para like, izquierda para pasar</p>
                </div>

                <!-- Contenedor de Cards -->
                <div class="card-container" id="cardContainer">
                    <!-- Las cards se generan dinámicamente aquí -->
                </div>

                <!-- Mensaje cuando no hay más cards -->
                <div class="no-more-cards" id="noMoreCards" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>¡Has visto todos los perfiles!</h3>
                    <p>Vuelve más tarde o ajusta tus preferencias para ver más sugerencias</p>
                    <button class="refresh-btn" id="refreshProfiles">
                        <i class="fas fa-redo"></i> Recargar Perfiles
                    </button>
                </div>

                <!-- Botones de Acción -->
                <div class="action-buttons">
                    <button class="action-btn btn-dislike" id="dislikeBtn">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="action-btn btn-super-like" id="superLikeBtn">
                        <i class="fas fa-star"></i>
                    </button>
                    <button class="action-btn btn-like" id="likeBtn">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay de Match -->
    <div class="match-overlay" id="matchOverlay">
        <div class="match-celebration">
            <i class="fas fa-heart"></i>
            <h2>¡It's a Match!</h2>
            <p id="matchMessage">Has hecho match con [Nombre]</p>
            <p style="color: rgba(255,255,255,0.7); margin: 20px 0;">Ahora pueden empezar a conversar</p>
            <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                <button id="continueMatching" style="
                    padding: 12px 30px;
                    background: rgba(255,255,255,0.1);
                    border: 1px solid rgba(255,255,255,0.2);
                    color: white;
                    border-radius: var(--border-radius);
                    font-family: 'Poppins', sans-serif;
                    cursor: pointer;
                    transition: var(--transition);
                ">
                    Seguir Viendo
                </button>
                <button id="sendMessage" style="
                    padding: 12px 30px;
                    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
                    color: white;
                    border: none;
                    border-radius: var(--border-radius);
                    font-family: 'Poppins', sans-serif;
                    cursor: pointer;
                    transition: var(--transition);
                ">
                    <i class="fas fa-comment"></i> Enviar Mensaje
                </button>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de perfiles (en producción vendría de un backend)
        const allProfiles = [
            {
                id: 1,
                type: 'daddy',
                name: 'Alexander',
                age: 42,
                location: 'Ciudad de México',
                height: 182,
                weight: 85,
                income: 'Alto',
                lifestyle: 'Lujoso',
                tags: ['Ejecutivo', 'Viajero', 'Arte', 'Vinos'],
                image: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 92
            },
            {
                id: 2,
                type: 'mommy',
                name: 'Isabella',
                age: 38,
                location: 'Miami',
                height: 170,
                weight: 62,
                income: 'Muy Alto',
                lifestyle: 'Social',
                tags: ['Empresaria', 'Filántropa', 'Yoga', 'Lujo'],
                image: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 88
            },
            {
                id: 3,
                type: 'girl',
                name: 'Sofía',
                age: 24,
                location: 'Madrid',
                height: 168,
                weight: 58,
                studies: 'Universitaria',
                lifestyle: 'Social',
                tags: ['Estudiante', 'Bailarina', 'Arte', 'Moda'],
                image: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 85
            },
            {
                id: 4,
                type: 'boy',
                name: 'Mateo',
                age: 26,
                location: 'Bogotá',
                height: 180,
                weight: 75,
                studies: 'Graduado',
                lifestyle: 'Atlético',
                tags: ['Deportista', 'Música', 'Viajes', 'Cocina'],
                image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 79
            },
            {
                id: 5,
                type: 'daddy',
                name: 'Carlos',
                age: 48,
                location: 'Buenos Aires',
                height: 185,
                weight: 88,
                income: 'Muy Alto',
                lifestyle: 'Lujoso',
                tags: ['Industrial', 'Autos', 'Fútbol', 'Whisky'],
                image: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 76
            },
            {
                id: 6,
                type: 'mommy',
                name: 'Valentina',
                age: 35,
                location: 'Los Ángeles',
                height: 172,
                weight: 58,
                income: 'Alto',
                lifestyle: 'Social',
                tags: ['Diseñadora', 'Moda', 'Arte', 'Tecnología'],
                image: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 91
            },
            {
                id: 7,
                type: 'girl',
                name: 'Camila',
                age: 22,
                location: 'Monterrey',
                height: 165,
                weight: 55,
                studies: 'Estudiante',
                lifestyle: 'Viajero',
                tags: ['Fotografía', 'Idiomas', 'Baile', 'Libros'],
                image: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 84
            },
            {
                id: 8,
                type: 'boy',
                name: 'Daniel',
                age: 28,
                location: 'Medellín',
                height: 178,
                weight: 72,
                studies: 'Profesional',
                lifestyle: 'Discreto',
                tags: ['Negocios', 'Privacidad', 'Tecnología', 'Café'],
                image: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                compatibility: 82
            }
        ];

        // Variables del sistema
        let currentProfiles = [...allProfiles];
        let viewedProfiles = new Set();
        let likedProfiles = [];
        let matches = [];
        let currentCard = null;
        let startX = 0;
        let startY = 0;
        let currentX = 0;
        let currentY = 0;
        let isDragging = false;

        // Preferencias del usuario
        const userPreferences = {
            type: 'all',
            minAge: 18,
            maxAge: 65,
            minHeight: 150,
            maxHeight: 200,
            location: 'all',
            lifestyle: 'all'
        };

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            initializePreferences();
            loadNextCard();
            setupEventListeners();
            updateStats();
        });

        // Inicializar controles de preferencias
        function initializePreferences() {
            // Botones de tipo
            document.querySelectorAll('.preference-btn[data-type]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.preference-btn[data-type]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    userPreferences.type = this.dataset.type;
                });
            });

            // Sliders de edad
            const ageMinSlider = document.getElementById('ageSliderMin');
            const ageMaxSlider = document.getElementById('ageSliderMax');
            const ageMinDisplay = document.getElementById('ageMin');
            const ageMaxDisplay = document.getElementById('ageMax');

            ageMinSlider.addEventListener('input', function() {
                if (parseInt(this.value) > parseInt(ageMaxSlider.value)) {
                    ageMaxSlider.value = this.value;
                    ageMaxDisplay.textContent = this.value;
                }
                ageMinDisplay.textContent = this.value;
                userPreferences.minAge = parseInt(this.value);
            });

            ageMaxSlider.addEventListener('input', function() {
                if (parseInt(this.value) < parseInt(ageMinSlider.value)) {
                    ageMinSlider.value = this.value;
                    ageMinDisplay.textContent = this.value;
                }
                ageMaxDisplay.textContent = this.value;
                userPreferences.maxAge = parseInt(this.value);
            });

            // Sliders de altura
            const heightMinSlider = document.getElementById('heightSliderMin');
            const heightMaxSlider = document.getElementById('heightSliderMax');
            const heightMinDisplay = document.getElementById('heightMin');
            const heightMaxDisplay = document.getElementById('heightMax');

            heightMinSlider.addEventListener('input', function() {
                if (parseInt(this.value) > parseInt(heightMaxSlider.value)) {
                    heightMaxSlider.value = this.value;
                    heightMaxDisplay.textContent = this.value + ' cm';
                }
                heightMinDisplay.textContent = this.value + ' cm';
                userPreferences.minHeight = parseInt(this.value);
            });

            heightMaxSlider.addEventListener('input', function() {
                if (parseInt(this.value) < parseInt(heightMinSlider.value)) {
                    heightMinSlider.value = this.value;
                    heightMinDisplay.textContent = this.value + ' cm';
                }
                heightMaxDisplay.textContent = this.value + ' cm';
                userPreferences.maxHeight = parseInt(this.value);
            });

            // Botones de ubicación
            document.querySelectorAll('.preference-btn[data-location]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.preference-btn[data-location]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    userPreferences.location = this.dataset.location;
                });
            });

            // Botones de estilo de vida
            document.querySelectorAll('.preference-btn[data-lifestyle]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.preference-btn[data-lifestyle]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    userPreferences.lifestyle = this.dataset.lifestyle;
                });
            });

            // Botón aplicar preferencias
            document.getElementById('applyPreferences').addEventListener('click', applyFilters);
        }

        // Aplicar filtros
        function applyFilters() {
            currentProfiles = allProfiles.filter(profile => {
                // Filtrar por tipo
                if (userPreferences.type !== 'all' && profile.type !== userPreferences.type) {
                    return false;
                }

                // Filtrar por edad
                if (profile.age < userPreferences.minAge || profile.age > userPreferences.maxAge) {
                    return false;
                }

                // Filtrar por altura
                if (profile.height < userPreferences.minHeight || profile.height > userPreferences.maxHeight) {
                    return false;
                }

                // Filtrar por estilo de vida
                if (userPreferences.lifestyle !== 'all' && profile.lifestyle !== userPreferences.lifestyle) {
                    return false;
                }

                return true;
            });

            // Resetear vistas
            viewedProfiles.clear();
            document.getElementById('noMoreCards').style.display = 'none';
            document.getElementById('cardContainer').innerHTML = '';
            loadNextCard();

            showNotification(`Filtros aplicados: ${currentProfiles.length} perfiles encontrados`, 'info');
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Botones de acción
            document.getElementById('dislikeBtn').addEventListener('click', () => swipeCard('left'));
            document.getElementById('superLikeBtn').addEventListener('click', () => swipeCard('up'));
            document.getElementById('likeBtn').addEventListener('click', () => swipeCard('right'));

            // Botón recargar perfiles
            document.getElementById('refreshProfiles').addEventListener('click', function() {
                viewedProfiles.clear();
                document.getElementById('noMoreCards').style.display = 'none';
                loadNextCard();
                showNotification('Perfiles recargados', 'info');
            });

            // Botones del match overlay
            document.getElementById('continueMatching').addEventListener('click', function() {
                document.getElementById('matchOverlay').style.display = 'none';
            });

            document.getElementById('sendMessage').addEventListener('click', function() {
                showNotification('Redirigiendo al chat...', 'info');
                document.getElementById('matchOverlay').style.display = 'none';
                // Aquí iría la redirección al chat
            });
        }

        // Cargar siguiente card
        function loadNextCard() {
            const availableProfiles = currentProfiles.filter(p => !viewedProfiles.has(p.id));
            
            if (availableProfiles.length === 0) {
                document.getElementById('noMoreCards').style.display = 'block';
                return;
            }

            // Seleccionar perfil aleatorio (en producción sería algoritmo de matching)
            const profile = availableProfiles[Math.floor(Math.random() * availableProfiles.length)];
            viewedProfiles.add(profile.id);
            
            // Crear card
            const card = document.createElement('div');
            card.className = 'match-card';
            card.dataset.id = profile.id;
            
            // Determinar badge según tipo
            let badgeClass, badgeText, badgeIcon;
            switch(profile.type) {
                case 'daddy':
                    badgeClass = 'badge-daddy';
                    badgeText = 'Sugar Daddy';
                    badgeIcon = 'fa-crown';
                    break;
                case 'mommy':
                    badgeClass = 'badge-mommy';
                    badgeText = 'Sugar Mommy';
                    badgeIcon = 'fa-gem';
                    break;
                case 'boy':
                    badgeClass = 'badge-boy';
                    badgeText = 'Sugar Boy';
                    badgeIcon = 'fa-user-tie';
                    break;
                case 'girl':
                    badgeClass = 'badge-girl';
                    badgeText = 'Sugar Girl';
                    badgeIcon = 'fa-user-heart';
                    break;
            }

            card.innerHTML = `
                <img src="${profile.image}" alt="${profile.name}" class="card-image">
                <div class="card-content">
                    <div class="card-header">
                        <div>
                            <div class="card-name">${profile.name}, ${profile.age}</div>
                            <div style="font-size: 14px; color: rgba(255,255,255,0.6); margin-top: 5px;">
                                <i class="fas fa-map-marker-alt"></i> ${profile.location}
                            </div>
                        </div>
                        <div class="card-badge ${badgeClass}">
                            <i class="fas ${badgeIcon}"></i> ${badgeText}
                        </div>
                    </div>
                    
                    <div class="card-details">
                        <div class="detail-item">
                            <i class="fas fa-ruler-vertical"></i>
                            <span>${profile.height} cm</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-weight"></i>
                            <span>${profile.weight} kg</span>
                        </div>
                        ${profile.income ? `
                        <div class="detail-item">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>${profile.income}</span>
                        </div>
                        ` : ''}
                        ${profile.studies ? `
                        <div class="detail-item">
                            <i class="fas fa-graduation-cap"></i>
                            <span>${profile.studies}</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="card-tags">
                        ${profile.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    
                    <div style="margin-top: 15px; padding: 10px; background: rgba(255,152,0,0.1); border-radius: 8px; font-size: 14px;">
                        <i class="fas fa-heart" style="color: var(--accent-color);"></i>
                        <strong style="color: var(--accent-color);"> ${profile.compatibility}% Compatibilidad</strong>
                    </div>
                </div>
            `;

            const container = document.getElementById('cardContainer');
            container.innerHTML = '';
            container.appendChild(card);
            currentCard = card;

            // Configurar drag & drop
            setupCardDrag(card);

            // Actualizar estadísticas
            updateStats();
        }

        // Configurar drag & drop para la card
        function setupCardDrag(card) {
            card.addEventListener('mousedown', startDrag);
            card.addEventListener('touchstart', startDrag, { passive: false });
            card.addEventListener('mouseup', endDrag);
            card.addEventListener('touchend', endDrag);
            card.addEventListener('mousemove', drag);
            card.addEventListener('touchmove', drag, { passive: false });
        }

        function startDrag(e) {
            isDragging = true;
            const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
            
            startX = clientX - currentX;
            startY = clientY - currentY;
            
            currentCard.style.transition = 'none';
            e.preventDefault();
        }

        function drag(e) {
            if (!isDragging || !currentCard) return;
            
            const clientX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
            const clientY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
            
            currentX = clientX - startX;
            currentY = clientY - startY;
            
            const rotate = currentX * 0.1;
            
            currentCard.style.transform = `translate(${currentX}px, ${currentY}px) rotate(${rotate}deg)`;
            
            // Cambiar opacidad basado en la distancia
            const opacity = 1 - Math.abs(currentX) / 300;
            currentCard.style.opacity = Math.max(0.5, opacity);
        }

        function endDrag() {
            if (!isDragging || !currentCard) return;
            isDragging = false;
            
            currentCard.style.transition = 'transform 0.6s, opacity 0.6s';
            
            const threshold = 100;
            
            if (Math.abs(currentX) > threshold) {
                // Swipe horizontal
                const direction = currentX > 0 ? 'right' : 'left';
                swipeCard(direction);
            } else if (currentY < -threshold) {
                // Swipe arriba (super like)
                swipeCard('up');
            } else {
                // Volver a posición original
                currentCard.style.transform = 'translate(0, 0) rotate(0deg)';
                currentCard.style.opacity = '1';
            }
            
            currentX = 0;
            currentY = 0;
        }

        // Swipe de card
        function swipeCard(direction) {
            if (!currentCard) return;
            
            const profileId = parseInt(currentCard.dataset.id);
            const profile = allProfiles.find(p => p.id === profileId);
            
            currentCard.classList.add(`swipe-${direction}`);
            
            switch(direction) {
                case 'left':
                    // Dislike
                    showNotification(`Pasaste a ${profile.name}`, 'info');
                    break;
                    
                case 'right':
                    // Like
                    likedProfiles.push(profileId);
                    document.getElementById('likesCount').textContent = likedProfiles.length;
                    
                    // Simular match (30% de probabilidad)
                    if (Math.random() < 0.3) {
                        matches.push(profileId);
                        document.getElementById('matchesCount').textContent = matches.length;
                        
                        // Mostrar overlay de match
                        document.getElementById('matchMessage').textContent = 
                            `¡Has hecho match con ${profile.name}!`;
                        document.getElementById('matchOverlay').style.display = 'flex';
                    } else {
                        showNotification(`❤️ Like enviado a ${profile.name}`, 'success');
                    }
                    break;
                    
                case 'up':
                    // Super like
                    showNotification(`⭐ Super like enviado a ${profile.name}`, 'info');
                    likedProfiles.push(profileId);
                    document.getElementById('likesCount').textContent = likedProfiles.length;
                    
                    // Mayor probabilidad de match con super like
                    if (Math.random() < 0.6) {
                        matches.push(profileId);
                        document.getElementById('matchesCount').textContent = matches.length;
                        
                        document.getElementById('matchMessage').textContent = 
                            `⭐ ¡Super like match con ${profile.name}!`;
                        document.getElementById('matchOverlay').style.display = 'flex';
                    }
                    break;
            }
            
            // Cargar siguiente card después de animación
            setTimeout(() => {
                loadNextCard();
            }, 600);
        }

        // Actualizar estadísticas
        function updateStats() {
            document.getElementById('viewsCount').textContent = viewedProfiles.size;
            
            // Calcular compatibilidad promedio
            if (likedProfiles.length > 0) {
                const totalCompatibility = likedProfiles.reduce((sum, id) => {
                    const profile = allProfiles.find(p => p.id === id);
                    return sum + (profile?.compatibility || 0);
                }, 0);
                
                const avgCompatibility = Math.round(totalCompatibility / likedProfiles.length);
                document.getElementById('compatibility').textContent = avgCompatibility + '%';
            }
        }

        // Mostrar notificación
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${type === 'success' ? 'rgba(76, 175, 80, 0.9)' : 
                           type === 'error' ? 'rgba(244, 67, 54, 0.9)' : 
                           'rgba(33, 150, 243, 0.9)'};
                color: white;
                padding: 15px 20px;
                border-radius: 12px;
                font-family: 'Poppins', sans-serif;
                font-size: 14px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                z-index: 10000;
                transform: translateY(100%);
                transition: transform 0.3s ease;
                display: flex;
                align-items: center;
                gap: 10px;
                backdrop-filter: blur(10px);
                max-width: 300px;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                  type === 'error' ? 'exclamation-circle' : 
                                  'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
    </script>
    // Si el usuario ya tiene perfil, redirigir automáticamente
document.addEventListener('DOMContentLoaded', function() {
    const userProfile = JSON.parse(localStorage.getItem('userProfile') || 'null');
    
    if (userProfile && userProfile.completed) {
        // Mostrar opción de ir directamente al dashboard
        const googleBtn = document.getElementById('googleSignIn');
        if (googleBtn) {
            googleBtn.insertAdjacentHTML('afterend', `
                <div style="margin: 20px 0; text-align: center;">
                    <button onclick="goToDashboard()" style="
                        background: rgba(255, 255, 255, 0.1);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        color: white;
                        padding: 12px 25px;
                        border-radius: var(--border-radius);
                        cursor: pointer;
                        font-family: 'Poppins', sans-serif;
                        transition: all 0.3s ease;
                    ">
                        <i class="fas fa-rocket"></i> Ir a mi Dashboard
                    </button>
                </div>
            `);
        }
    }
});

function goToDashboard() {
    const userProfile = JSON.parse(localStorage.getItem('userProfile') || 'null');
    
    if (userProfile) {
        if (userProfile.type === 'daddy' || userProfile.type === 'mommy') {
            window.location.href = 'listing-sugars.html';
        } else if (userProfile.type === 'baby') {
            window.location.href = 'listing-babies.html';
        }
    }
}
</body>
</html>